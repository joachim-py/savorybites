<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Receipt - {{ order.order_number }}</title>
    <style>
      @page {
        size: 112mm 297mm; /* Wide format receipt */
        margin: 5mm;
      }
      body {
        font-family: "Courier New", monospace;
        font-size: 12px;
        line-height: 1.4;
        color: #000;
        margin: 0;
        padding: 0;
      }
      .receipt {
        width: 100%;
        max-width: 100%;
        margin: 0 auto;
        padding: 10px;
        box-sizing: border-box;
      }
      .header {
        margin-bottom: 15px;
        border-bottom: 1px dashed #000;
        padding-bottom: 10px;
      }
      .header-info {
        text-align: center;
        margin: 5px 0;
        border-bottom: 1px dashed #000;
      }
      .header h1 {
        font-size: 18px;
      }
      .order-info {
        margin: 10px 0;
        border-bottom: 1px dashed #000;
        padding-bottom: 10px;
      }
      .order-info p {
        margin: 3px 0;
        display: flex;
        justify-content: space-between;
      }
      .order-info p span:first-child {
        font-weight: bold;
      }
      .items {
        width: 100%;
        border-collapse: collapse;
        margin: 6px 0;
      }
      .items th {
        text-align: left;
        border-bottom: 1px solid #000;
        padding: 5px 0;
        text-transform: uppercase;
        font-size: 10px;
      }
      .items td {
        padding: 5px 0;
        vertical-align: top;
      }
      .items .item-name {
        width: 60%;
      }
      .items .item-qty,
      .items .item-price,
      .items .item-total {
        width: 25%;
        text-align: right;
      }
      .totals {
        margin: 15px 0;
        border-top: 1px dashed #000;
        border-bottom: 1px dashed #000;
        padding: 10px 0;
      }
      .totals p {
        display: flex;
        justify-content: space-between;
        margin: 5px 0;
      }
      .totals .total {
        font-weight: bold;
        font-size: 14px;
      }
      .footer {
        text-align: center;
        font-size: 10px;
        margin-top: 5px;
      }
      .thank-you {
        text-align: center;
        margin-top: 15px;
        margin-bottom: 0;
        font-weight: bold;
        text-transform: uppercase;
      }
    </style>
  </head>
  <body>
    <div class="receipt">
      <div class="header-info">
        <span style="font-size: 20px; font-weight: bold; margin-bottom: 2px">
          {{ site_name }}
        </span>
        <br />
        123 Gourmet Avenue, Culinary District, NY 10001 <br />
        (070) 6268-2727 | info@savorybites.com <br />
      </div>
      <div class="header">
        <p></p>
      </div>

      <div class="order-info">
        <p>
          Customer: {{ order.customer_name }} <br />
          Email: {{ order.customer_email }}<br />
          OrderId: #{{ order.order_id }}<br />
          Date: {{ order.order_date|date:"F j, Y H:i" }} <br />
          {% if order.delivery_address %} Delivery Address: {{
          order.delivery_address }} {% endif %}
        </p>
      </div>

      <table class="items">
        <thead>
          <tr>
            <th class="item-name">Item</th>
            <th class="item-qty">Qty</th>
            <th class="item-price">Price</th>
            <th class="item-total">Total</th>
          </tr>
        </thead>
        <tbody>
          {% for item in order_items %}
          <tr>
            <td class="item-name">{{ item.menu_item_name }}</td>
            <td class="item-qty">{{ item.quantity }}</td>
            <td class="item-price">
              N{{ item.menu_item_price|floatformat:2 }}
            </td>
            <td class="item-total">N{{ item.subtotal|floatformat:2 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="totals">
        <p>
          <span>Subtotal:</span>
          <span>N{{ order.total_price|floatformat:2 }}</span>
        </p>
        <br />
        <p>
          <span>Delivery Fee:</span>
          {% if order.delivery_option == 'delivery' %}
          <span>N{{ order.get_delivery_price|floatformat:2 }}</span>
          {% else %}
          <span> Free</span>
          {% endif %}
        </p>
        <br />
        {% if order.tax_amount %}
        <p>
          <span>Tax ({{ order.tax_percentage|default:0 }}%):</span>
          <span>N{{ order.tax_amount|floatformat:2 }}</span>
        </p>
        {% endif %}
        <p class="total">
          <span>Total:</span>
          <span>N{{ order.delivery_price|floatformat:2 }}</span>
        </p>
      </div>

      <div class="thank-you">Thanks for your patronage!</div>

      <div class="footer">
        <p>
          For any questions about your order, please contact us at:<br />
          Phone: (070) 6268-2727 | Email: info@savorybites.com<br />
          Business Hours: Mon-Sun 11:00 AM - 10:00 PM<br />
          {{ current_date }}
        </p>
      </div>
    </div>
  </body>
</html>
